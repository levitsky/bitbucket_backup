{"links": {"self": {"href": "data/repositories/levitsky/pyteomics/issues/37/comments/52112019.json"}, "html": {"href": "#!/levitsky/pyteomics/issues/37#comment-52112019"}}, "issue": {"links": {"self": {"href": "data/repositories/levitsky/pyteomics/issues/37.json"}}, "type": "issue", "id": 37, "repository": {"links": {"self": {"href": "data/repositories/levitsky/pyteomics.json"}, "html": {"href": "#!/levitsky/pyteomics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3f6302de-10da-4d3c-b258-0bb6a2368972}ts=74456"}}, "type": "repository", "name": "pyteomics", "full_name": "levitsky/pyteomics", "uuid": "{3f6302de-10da-4d3c-b258-0bb6a2368972}"}, "title": "Add numpress support in mzML"}, "content": {"raw": "[https://github.com/mobiusklein/pynumpress/tree/master](https://github.com/mobiusklein/pynumpress/tree/master) appears to be working on Py2.7 and Py3 on both Windows and Linux. Could you install from master and let me know if it works for you please?\n\nThe change boils down to \"if this is Python 2 on Linux, generate code s.t. `np.ndarray` is not a member of the two fused types and it will be handled by the `object` case at run time rather than getting its own compile-time specialization\u201d. The code will otherwise look identical when compiled under any other conditions. \n\nThe one downside to this fix is that the compilation changes are _Cython_ compile-time changes, not _C_, so that means that if I were to build an `sdist` of the source code and upload it to PyPI from my Windows machine, that conditional code generation change won\u2019t be in effect _even if_ the person who then installs it is on Linux with Python 2.7. This means that I need to add extra logic to the setup script to make Cython a hard requirement if you\u2019re on Linux with Python 2.7, or to at least provide a wheel for that particular user. I\u2019ll deal with that if it fixes the problem.", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"https://github.com/mobiusklein/pynumpress/tree/master\" rel=\"nofollow\">https://github.com/mobiusklein/pynumpress/tree/master</a> appears to be working on Py2.7 and Py3 on both Windows and Linux. Could you install from master and let me know if it works for you please?</p>\n<p>The change boils down to \"if this is Python 2 on Linux, generate code s.t. <code>np.ndarray</code> is not a member of the two fused types and it will be handled by the <code>object</code> case at run time rather than getting its own compile-time specialization\u201d. The code will otherwise look identical when compiled under any other conditions. </p>\n<p>The one downside to this fix is that the compilation changes are <em>Cython</em> compile-time changes, not <em>C</em>, so that means that if I were to build an <code>sdist</code> of the source code and upload it to PyPI from my Windows machine, that conditional code generation change won\u2019t be in effect <em>even if</em> the person who then installs it is on Linux with Python 2.7. This means that I need to add extra logic to the setup script to make Cython a hard requirement if you\u2019re on Linux with Python 2.7, or to at least provide a wheel for that particular user. I\u2019ll deal with that if it fixes the problem.</p>", "type": "rendered"}, "created_on": "2019-05-14T01:41:09.686457+00:00", "user": {"display_name": "Joshua Klein", "uuid": "{919f0add-304d-4b9a-8889-d2622a3dbc96}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B919f0add-304d-4b9a-8889-d2622a3dbc96%7D"}, "html": {"href": "https://bitbucket.org/%7B919f0add-304d-4b9a-8889-d2622a3dbc96%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7d0e70bc74f783efa621a2bdd228ca22d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJK-3.png"}}, "nickname": "mobiusklein", "type": "user", "account_id": "557058:ff82222f-afe5-4135-a1b7-8de99a00f669"}, "updated_on": null, "type": "issue_comment", "id": 52112019}