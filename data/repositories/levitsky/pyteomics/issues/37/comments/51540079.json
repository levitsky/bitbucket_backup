{"links": {"self": {"href": "data/repositories/levitsky/pyteomics/issues/37/comments/51540079.json"}, "html": {"href": "#!/levitsky/pyteomics/issues/37#comment-51540079"}}, "issue": {"links": {"self": {"href": "data/repositories/levitsky/pyteomics/issues/37.json"}}, "type": "issue", "id": 37, "repository": {"links": {"self": {"href": "data/repositories/levitsky/pyteomics.json"}, "html": {"href": "#!/levitsky/pyteomics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3f6302de-10da-4d3c-b258-0bb6a2368972}ts=74456"}}, "type": "repository", "name": "pyteomics", "full_name": "levitsky/pyteomics", "uuid": "{3f6302de-10da-4d3c-b258-0bb6a2368972}"}, "title": "Add numpress support in mzML"}, "content": {"raw": "Thank you.\n\nI wrote a simple test for this functionality and encountered the following error on Python 2.7:\n\n```python\nIn [5]: pynumpress.encode_slof(data, 1.0)\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-5-76e6a6156fc5> in <module>()\n----> 1 pynumpress.encode_slof(data, 1.0)\n\npynumpress/pynumpress.pyx in pynumpress.pynumpress.__pyx_fused_cpdef()\n\n/usr/lib/python2.7/site-packages/numpy/__init__.py in <module>()\n    140     from . import _distributor_init\n    141 \n--> 142     from . import core\n    143     from .core import *\n    144     from . import compat\n\n/usr/lib/python2.7/site-packages/numpy/core/__init__.py in <module>()\n     38 \n     39 try:\n---> 40     from . import multiarray\n     41 except ImportError as exc:\n     42     import sys\n\n/usr/lib/python2.7/site-packages/numpy/core/multiarray.py in <module>()\n     10 import warnings\n     11 \n---> 12 from . import overrides\n     13 from . import _multiarray_umath\n     14 import numpy as np\n\n/usr/lib/python2.7/site-packages/numpy/core/overrides.py in <module>()\n     44     ------\n     45     TypeError : if no implementation is found.\n---> 46     \"\"\")\n     47 \n     48 \n\nRuntimeError: implement_array_function method already has a docstring\n```\n\nI also get stuff like this:\n\n```\nTraceback (most recent call last):\n  File \"test_mzml.py\", line 169, in test_numpress_slof\n    encoded = base64.b64encode(pynumpress.encode_slof(data, pynumpress.optimal_slof_fixed_point(data)).tobytes()).decode('ascii')\n  File \"pynumpress/pynumpress.pyx\", line 79, in pynumpress.pynumpress.__pyx_fused_cpdef\n  File \"/usr/lib/python2.7/site-packages/numpy/__init__.py\", line 140, in <module>\n    from . import _distributor_init\nImportError: cannot import name _distributor_init\n```\n\nThis feels like an import path mix-up, but I haven't pinpointed it yet.\n\nOn Python 3, the code works. What could be the problem? Should I report it on your repo?", "markup": "markdown", "html": "<p>Thank you.</p>\n<p>I wrote a simple test for this functionality and encountered the following error on Python 2.7:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">]:</span> <span class=\"n\">pynumpress</span><span class=\"o\">.</span><span class=\"n\">encode_slof</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"mf\">1.0</span><span class=\"p\">)</span>\n<span class=\"o\">---------------------------------------------------------------------------</span>\n<span class=\"ne\">RuntimeError</span>                              <span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">)</span>\n<span class=\"o\">&lt;</span><span class=\"n\">ipython</span><span class=\"o\">-</span><span class=\"nb\">input</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"o\">-</span><span class=\"mf\">76e6</span><span class=\"n\">a6156fc5</span><span class=\"o\">&gt;</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span><span class=\"p\">()</span>\n<span class=\"o\">----&gt;</span> <span class=\"mi\">1</span> <span class=\"n\">pynumpress</span><span class=\"o\">.</span><span class=\"n\">encode_slof</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"mf\">1.0</span><span class=\"p\">)</span>\n\n<span class=\"n\">pynumpress</span><span class=\"o\">/</span><span class=\"n\">pynumpress</span><span class=\"o\">.</span><span class=\"n\">pyx</span> <span class=\"ow\">in</span> <span class=\"n\">pynumpress</span><span class=\"o\">.</span><span class=\"n\">pynumpress</span><span class=\"o\">.</span><span class=\"n\">__pyx_fused_cpdef</span><span class=\"p\">()</span>\n\n<span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">python2</span><span class=\"o\">.</span><span class=\"mi\">7</span><span class=\"o\">/</span><span class=\"n\">site</span><span class=\"o\">-</span><span class=\"n\">packages</span><span class=\"o\">/</span><span class=\"n\">numpy</span><span class=\"o\">/</span><span class=\"fm\">__init__</span><span class=\"o\">.</span><span class=\"n\">py</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span><span class=\"p\">()</span>\n    <span class=\"mi\">140</span>     <span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">_distributor_init</span>\n    <span class=\"mi\">141</span> \n<span class=\"o\">--&gt;</span> <span class=\"mi\">142</span>     <span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">core</span>\n    <span class=\"mi\">143</span>     <span class=\"kn\">from</span> <span class=\"nn\">.core</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n    <span class=\"mi\">144</span>     <span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">compat</span>\n\n<span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">python2</span><span class=\"o\">.</span><span class=\"mi\">7</span><span class=\"o\">/</span><span class=\"n\">site</span><span class=\"o\">-</span><span class=\"n\">packages</span><span class=\"o\">/</span><span class=\"n\">numpy</span><span class=\"o\">/</span><span class=\"n\">core</span><span class=\"o\">/</span><span class=\"fm\">__init__</span><span class=\"o\">.</span><span class=\"n\">py</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span><span class=\"p\">()</span>\n     <span class=\"mi\">38</span> \n     <span class=\"mi\">39</span> <span class=\"k\">try</span><span class=\"p\">:</span>\n<span class=\"o\">---&gt;</span> <span class=\"mi\">40</span>     <span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">multiarray</span>\n     <span class=\"mi\">41</span> <span class=\"k\">except</span> <span class=\"ne\">ImportError</span> <span class=\"k\">as</span> <span class=\"n\">exc</span><span class=\"p\">:</span>\n     <span class=\"mi\">42</span>     <span class=\"kn\">import</span> <span class=\"nn\">sys</span>\n\n<span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">python2</span><span class=\"o\">.</span><span class=\"mi\">7</span><span class=\"o\">/</span><span class=\"n\">site</span><span class=\"o\">-</span><span class=\"n\">packages</span><span class=\"o\">/</span><span class=\"n\">numpy</span><span class=\"o\">/</span><span class=\"n\">core</span><span class=\"o\">/</span><span class=\"n\">multiarray</span><span class=\"o\">.</span><span class=\"n\">py</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span><span class=\"p\">()</span>\n     <span class=\"mi\">10</span> <span class=\"kn\">import</span> <span class=\"nn\">warnings</span>\n     <span class=\"mi\">11</span> \n<span class=\"o\">---&gt;</span> <span class=\"mi\">12</span> <span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">overrides</span>\n     <span class=\"mi\">13</span> <span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">_multiarray_umath</span>\n     <span class=\"mi\">14</span> <span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"kn\">as</span> <span class=\"nn\">np</span>\n\n<span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">python2</span><span class=\"o\">.</span><span class=\"mi\">7</span><span class=\"o\">/</span><span class=\"n\">site</span><span class=\"o\">-</span><span class=\"n\">packages</span><span class=\"o\">/</span><span class=\"n\">numpy</span><span class=\"o\">/</span><span class=\"n\">core</span><span class=\"o\">/</span><span class=\"n\">overrides</span><span class=\"o\">.</span><span class=\"n\">py</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span><span class=\"p\">()</span>\n     <span class=\"mi\">44</span>     <span class=\"o\">------</span>\n     <span class=\"mi\">45</span>     <span class=\"ne\">TypeError</span> <span class=\"p\">:</span> <span class=\"k\">if</span> <span class=\"n\">no</span> <span class=\"n\">implementation</span> <span class=\"ow\">is</span> <span class=\"n\">found</span><span class=\"o\">.</span>\n<span class=\"o\">---&gt;</span> <span class=\"mi\">46</span>     <span class=\"s2\">&quot;&quot;&quot;)</span>\n<span class=\"s2\">     47 </span>\n<span class=\"s2\">     48 </span>\n\n<span class=\"s2\">RuntimeError: implement_array_function method already has a docstring</span>\n</pre></div>\n\n\n<p>I also get stuff like this:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;test_mzml.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">169</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">test_numpress_slof</span>\n    <span class=\"n\">encoded</span> <span class=\"o\">=</span> <span class=\"n\">base64</span><span class=\"o\">.</span><span class=\"n\">b64encode</span><span class=\"p\">(</span><span class=\"n\">pynumpress</span><span class=\"o\">.</span><span class=\"n\">encode_slof</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">pynumpress</span><span class=\"o\">.</span><span class=\"n\">optimal_slof_fixed_point</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">))</span><span class=\"o\">.</span><span class=\"n\">tobytes</span><span class=\"p\">())</span><span class=\"o\">.</span><span class=\"n\">decode</span><span class=\"p\">(</span><span class=\"s1\">&#39;ascii&#39;</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;pynumpress/pynumpress.pyx&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">79</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">pynumpress</span><span class=\"o\">.</span><span class=\"n\">pynumpress</span><span class=\"o\">.</span><span class=\"n\">__pyx_fused_cpdef</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/usr/lib/python2.7/site-packages/numpy/__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">140</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">_distributor_init</span>\n<span class=\"ne\">ImportError</span><span class=\"p\">:</span> <span class=\"n\">cannot</span> <span class=\"kn\">import</span> <span class=\"nn\">name</span> <span class=\"nn\">_distributor_init</span>\n</pre></div>\n\n\n<p>This feels like an import path mix-up, but I haven't pinpointed it yet.</p>\n<p>On Python 3, the code works. What could be the problem? Should I report it on your repo?</p>", "type": "rendered"}, "created_on": "2019-04-08T16:00:59.727003+00:00", "user": {"display_name": "Lev Levitsky", "uuid": "{eb44325f-4ee0-4e0b-a27c-f2ea23122a56}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beb44325f-4ee0-4e0b-a27c-f2ea23122a56%7D"}, "html": {"href": "https://bitbucket.org/%7Beb44325f-4ee0-4e0b-a27c-f2ea23122a56%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a2593c44c42429c503d2e5e9e307e241d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsLL-6.png"}}, "nickname": "levitsky", "type": "user", "account_id": "557058:986c547b-c50a-40b3-948a-29b4a93b7b30"}, "updated_on": "2019-11-28T10:45:19.818129+00:00", "type": "issue_comment", "id": 51540079}