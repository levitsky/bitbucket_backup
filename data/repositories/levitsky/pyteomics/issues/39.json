{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/levitsky/pyteomics.json"}, "html": {"href": "#!/levitsky/pyteomics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3f6302de-10da-4d3c-b258-0bb6a2368972}ts=74456"}}, "type": "repository", "name": "pyteomics", "full_name": "levitsky/pyteomics", "uuid": "{3f6302de-10da-4d3c-b258-0bb6a2368972}"}, "links": {"attachments": {"href": "data/repositories/levitsky/pyteomics/issues/39/attachments_page=1.json"}, "self": {"href": "data/repositories/levitsky/pyteomics/issues/39.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/levitsky/pyteomics/issues/39/watch"}, "comments": {"href": "data/repositories/levitsky/pyteomics/issues/39/comments_page=1.json"}, "html": {"href": "#!/levitsky/pyteomics/issues/39/bug-in-ms2-parser-_handle_s"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/levitsky/pyteomics/issues/39/vote"}}, "reporter": {"display_name": "Stephen Blaskowski", "uuid": "{3e968357-25d3-4cb4-966a-3c128545fa5d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3e968357-25d3-4cb4-966a-3c128545fa5d%7D"}, "html": {"href": "https://bitbucket.org/%7B3e968357-25d3-4cb4-966a-3c128545fa5d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/59ccf9ccc7f8e3d2572987cd74bfd186d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSB-4.png"}}, "nickname": "blasks", "type": "user", "account_id": "5c82e24b03a1f86544381a3c"}, "title": "Bug in ms2 parser _handle_S", "component": null, "votes": 0, "watches": 1, "content": {"raw": "I was getting a key error when trying to parse an ms2 file. I made this change to my copy of the source code and it seemed to fix the problem\r\n\r\nIn MS1Base class:\r\n\r\n    def _handle_S(self, line, sline, params):\r\n        sline = line.strip().split(None, 3)\r\n        params['scan'] = tuple(sline[1:3])\r\n        if len(sline) == 4:  # in MS2 the S line contains the precursor m/z as a 4th column\r\n            params['precursor m/z'] = float(sline[3])    # change sline to params\r\n            # params['precursor m/z'] = float(params[3])    # original code", "markup": "markdown", "html": "<p>I was getting a key error when trying to parse an ms2 file. I made this change to my copy of the source code and it seemed to fix the problem</p>\n<p>In MS1Base class:</p>\n<div class=\"codehilite\"><pre><span></span>def _handle_S(self, line, sline, params):\n    sline = line.strip().split(None, 3)\n    params[&#39;scan&#39;] = tuple(sline[1:3])\n    if len(sline) == 4:  # in MS2 the S line contains the precursor m/z as a 4th column\n        params[&#39;precursor m/z&#39;] = float(sline[3])    # change sline to params\n        # params[&#39;precursor m/z&#39;] = float(params[3])    # original code\n</pre></div>", "type": "rendered"}, "assignee": {"display_name": "Lev Levitsky", "uuid": "{eb44325f-4ee0-4e0b-a27c-f2ea23122a56}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beb44325f-4ee0-4e0b-a27c-f2ea23122a56%7D"}, "html": {"href": "https://bitbucket.org/%7Beb44325f-4ee0-4e0b-a27c-f2ea23122a56%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a2593c44c42429c503d2e5e9e307e241d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsLL-6.png"}}, "nickname": "levitsky", "type": "user", "account_id": "557058:986c547b-c50a-40b3-948a-29b4a93b7b30"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-04-23T19:23:37.155946+00:00", "milestone": null, "updated_on": "2019-04-25T14:30:31.154540+00:00", "type": "issue", "id": 39}