{"links": {"self": {"href": "data/repositories/levitsky/pyteomics/pullrequests/14/comments/53102252.json"}, "html": {"href": "#!/levitsky/pyteomics/pull-requests/14/_/diff#comment-53102252"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 14, "links": {"self": {"href": "data/repositories/levitsky/pyteomics/pullrequests/14.json"}, "html": {"href": "#!/levitsky/pyteomics/pull-requests/14"}}, "title": "Compression factoring"}, "content": {"raw": "I did try a callback-based design for mzXML, but the behavior felt clumsy. Something less clumsy would be to have the MzXML class override `binary_array_record` to be a new namedtuple doing just what you described. I'll implement that.\n\nI had some ideas about indexing compressed files, but my research has found that that can't be done unless the file is compressed using a more sophisticated compressor (https://github.com/mobiusklein/python-idzip). This is like, but not the same as BGZF. In theory, bzip2 should work for this purpose as well, but the Python implementation, hidden inside the _bz2 extension module, uses the same linear decompression for seeking that the gzip module does. ", "markup": "markdown", "html": "<p>I did try a callback-based design for mzXML, but the behavior felt clumsy. Something less clumsy would be to have the MzXML class override <code>binary_array_record</code> to be a new namedtuple doing just what you described. I'll implement that.</p>\n<p>I had some ideas about indexing compressed files, but my research has found that that can't be done unless the file is compressed using a more sophisticated compressor (<a href=\"https://github.com/mobiusklein/python-idzip\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/mobiusklein/python-idzip</a>). This is like, but not the same as BGZF. In theory, bzip2 should work for this purpose as well, but the Python implementation, hidden inside the _bz2 extension module, uses the same linear decompression for seeking that the gzip module does. </p>", "type": "rendered"}, "created_on": "2018-01-05T21:31:08.121928+00:00", "user": {"display_name": "Joshua Klein", "uuid": "{919f0add-304d-4b9a-8889-d2622a3dbc96}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B919f0add-304d-4b9a-8889-d2622a3dbc96%7D"}, "html": {"href": "https://bitbucket.org/%7B919f0add-304d-4b9a-8889-d2622a3dbc96%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7d0e70bc74f783efa621a2bdd228ca22d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJK-3.png"}}, "nickname": "mobiusklein", "type": "user", "account_id": "557058:ff82222f-afe5-4135-a1b7-8de99a00f669"}, "updated_on": "2018-01-05T21:31:08.200956+00:00", "type": "pullrequest_comment", "id": 53102252}