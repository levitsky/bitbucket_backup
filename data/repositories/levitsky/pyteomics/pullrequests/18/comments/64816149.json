{"links": {"self": {"href": "data/repositories/levitsky/pyteomics/pullrequests/18/comments/64816149.json"}, "html": {"href": "#!/levitsky/pyteomics/pull-requests/18/_/diff#comment-64816149"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 18, "links": {"self": {"href": "data/repositories/levitsky/pyteomics/pullrequests/18.json"}, "html": {"href": "#!/levitsky/pyteomics/pull-requests/18"}}, "title": "Re-add missing `_retrieve_refs` method to `XML`."}, "content": {"raw": "Issue resolved by adding a bit of extra logic to `_get_info`\n\n```python\n        # flatten the excessive nesting\n        for k, v in dict(info).items():\n            if k in self._structures_to_flatten:\n                if isinstance(v, list):  # new logic\n                    for vi in v:\n                        info.update(vi)\n                else:\n                    info.update(v)\n                del info[k]\n```\n", "markup": "markdown", "html": "<p>Issue resolved by adding a bit of extra logic to <code>_get_info</code></p>\n<div class=\"codehilite language-python\"><pre><span></span>        <span class=\"c1\"># flatten the excessive nesting</span>\n        <span class=\"k\">for</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"n\">v</span> <span class=\"ow\">in</span> <span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">info</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">():</span>\n            <span class=\"k\">if</span> <span class=\"n\">k</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_structures_to_flatten</span><span class=\"p\">:</span>\n                <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">v</span><span class=\"p\">,</span> <span class=\"nb\">list</span><span class=\"p\">):</span>  <span class=\"c1\"># new logic</span>\n                    <span class=\"k\">for</span> <span class=\"n\">vi</span> <span class=\"ow\">in</span> <span class=\"n\">v</span><span class=\"p\">:</span>\n                        <span class=\"n\">info</span><span class=\"o\">.</span><span class=\"n\">update</span><span class=\"p\">(</span><span class=\"n\">vi</span><span class=\"p\">)</span>\n                <span class=\"k\">else</span><span class=\"p\">:</span>\n                    <span class=\"n\">info</span><span class=\"o\">.</span><span class=\"n\">update</span><span class=\"p\">(</span><span class=\"n\">v</span><span class=\"p\">)</span>\n                <span class=\"k\">del</span> <span class=\"n\">info</span><span class=\"p\">[</span><span class=\"n\">k</span><span class=\"p\">]</span>\n</pre></div>", "type": "rendered"}, "created_on": "2018-05-21T14:36:05.181824+00:00", "user": {"display_name": "Joshua Klein", "uuid": "{919f0add-304d-4b9a-8889-d2622a3dbc96}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B919f0add-304d-4b9a-8889-d2622a3dbc96%7D"}, "html": {"href": "https://bitbucket.org/%7B919f0add-304d-4b9a-8889-d2622a3dbc96%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7d0e70bc74f783efa621a2bdd228ca22d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJK-3.png"}}, "nickname": "mobiusklein", "type": "user", "account_id": "557058:ff82222f-afe5-4135-a1b7-8de99a00f669"}, "updated_on": "2018-05-21T14:36:05.262727+00:00", "type": "pullrequest_comment", "id": 64816149}