{"links": {"self": {"href": "data/repositories/levitsky/pyteomics/pullrequests/35/comments/121405321.json"}, "html": {"href": "#!/levitsky/pyteomics/pull-requests/35/_/diff#comment-121405321"}}, "parent": {"id": 121402810, "links": {"self": {"href": "data/repositories/levitsky/pyteomics/pullrequests/35/comments/121402810.json"}, "html": {"href": "#!/levitsky/pyteomics/pull-requests/35/_/diff#comment-121402810"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/levitsky/pyteomics/pullrequests/35.json"}, "html": {"href": "#!/levitsky/pyteomics/pull-requests/35"}}, "title": "Unit primitive slots"}, "content": {"raw": "It looks like the interning operation is almost more expensive than the construction of `cvstr`. Caching the whole instance looks to be enough to recover performance there. Removing interning of unit names on `unitfloat` also helps keep their runtime cost down, though it does mean they are slightly more space expensive, but the main space savings is already achieved by getting rid of their instance `dict` so that\u2019s not a big deal.", "markup": "markdown", "html": "<p>It looks like the interning operation is almost more expensive than the construction of <code>cvstr</code>. Caching the whole instance looks to be enough to recover performance there. Removing interning of unit names on <code>unitfloat</code> also helps keep their runtime cost down, though it does mean they are slightly more space expensive, but the main space savings is already achieved by getting rid of their instance <code>dict</code> so that\u2019s not a big deal.</p>", "type": "rendered"}, "created_on": "2019-10-19T15:51:52.301858+00:00", "user": {"display_name": "Joshua Klein", "uuid": "{919f0add-304d-4b9a-8889-d2622a3dbc96}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B919f0add-304d-4b9a-8889-d2622a3dbc96%7D"}, "html": {"href": "https://bitbucket.org/%7B919f0add-304d-4b9a-8889-d2622a3dbc96%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7d0e70bc74f783efa621a2bdd228ca22d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJK-3.png"}}, "nickname": "mobiusklein", "type": "user", "account_id": "557058:ff82222f-afe5-4135-a1b7-8de99a00f669"}, "updated_on": "2019-10-19T15:51:52.644002+00:00", "type": "pullrequest_comment", "id": 121405321}